<?xml version="1.0" encoding="utf-8" ?>
<Patch>	

<Operation Class="PatchOperationSequence">
  	<success>Always</success>
		<operations>
			<!-- If QEE loaded then replace default TX2K/3/4 recipes by customized GS -->
			<!-- TX2K -->
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX2K"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX2KMaleSurrogate>1</ATPP_GSGeneratorTX2KMaleSurrogate>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX2KFemale"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX2KFemaleSurrogate>1</ATPP_GSGeneratorTX2KFemaleSurrogate>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX2KAndroid"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX2KMale>1</ATPP_GSGeneratorTX2KMale>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX2KFemaleAndroid"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX2KFemale>1</ATPP_GSGeneratorTX2KFemale>
						</products>
					</value>
				</match>
			</li>
			<!-- TX3 -->
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX3"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX3MaleSurrogate>1</ATPP_GSGeneratorTX3MaleSurrogate>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX3Female"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX3FemaleSurrogate>1</ATPP_GSGeneratorTX3FemaleSurrogate>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX3Android"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX3Male>1</ATPP_GSGeneratorTX3Male>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX3FemaleAndroid"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX3Female>1</ATPP_GSGeneratorTX3Female>
						</products>
					</value>
				</match>
			</li>
			<!-- TX4 -->
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX4"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX4MaleSurrogate>1</ATPP_GSGeneratorTX4MaleSurrogate>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateSX4Female"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX4FemaleSurrogate>1</ATPP_GSGeneratorTX4FemaleSurrogate>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX4Android"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX4Male>1</ATPP_GSGeneratorTX4Male>
						</products>
					</value>
				</match>
			</li>
			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/RecipeDef[defName = "ATPP_CreateTX4FemaleAndroid"]/products</xpath>
					<value>
						<products>
							<ATPP_GSGeneratorTX4Female>1</ATPP_GSGeneratorTX4Female>
						</products>
					</value>
				</match>
			</li>
		</operations>
</Operation>

<Operation Class="PatchOperationSequence">
  	<success>Always</success>
	<operations>
		<!-- If QEE not loaded remove GEE referenced compProperties and class if not loaded-->
		<li Class="PatchOperationConditional">
			<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
			<nomatch Class="PatchOperationReplace">
				<xpath>/Defs/ThingDef[defName = "ATPP_GS_TX2KFemale" or defName = "ATPP_GS_TX2KMale" or defName = "ATPP_GS_TX3Female" or defName = "ATPP_GS_TX3Male" or defName = "ATPP_GS_TX4Female" or defName = "ATPP_GS_TX4Male"]/comps</xpath>
				<value>
					<comps></comps>
				</value>
			</nomatch>
		</li>
		<li Class="PatchOperationConditional">
			<xpath>/Defs/ThingDef[defName = "QE_Building_OrganVat"]</xpath>
			<nomatch Class="PatchOperationReplace">
				<xpath>/Defs/ThingDef[defName = "ATPP_GS_TX2KFemale" or defName = "ATPP_GS_TX2KMale" or defName = "ATPP_GS_TX3Female" or defName = "ATPP_GS_TX3Male" or defName = "ATPP_GS_TX4Female" or defName = "ATPP_GS_TX4Male"]/thingClass</xpath>
				<value>
					<thingClass>ThingWithComps</thingClass>
				</value>
			</nomatch>
		</li>
	</operations>
</Operation>

</Patch>